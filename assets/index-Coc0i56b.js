const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./exp1-BAA5ApY_.js","./vendor-C0OfONeZ.js","./vendor-DCxi1ktt.css","./exp1-CPLPBtwk.css","./exp2-Cz7Xedxp.js","./EnterFullScreen-CMkwcFAG.js","./EnterFullScreen-DtHryA8Z.css","./exp2-CCi_LmzK.css","./exp3-wlwq2hnM.js","./exp3-CLI6cICj.css","./exp4-Coa1yU1l.js","./exp4-B8_1ccEW.css","./index-DKAOCwgO.js","./index-RlQq_KYk.css"])))=>i.map(i=>d[i]);
var le=Object.defineProperty;var ue=(r,e,t)=>e in r?le(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var d=(r,e,t)=>ue(r,typeof e!="symbol"?e+"":e,t);import{d as M,c as b,o as h,u as f,R as ce,a as _,b as P,e as O,i as he,r as j,h as k,n as F,f as H,X as de,g as S,j as z,t as D,k as Z,E as pe,w as fe,l as T,F as I,m as C,p as me,q as w,s as q,v as ge,x as _e,y as ye,z as ve,A as we,B as be,C as xe,D as Ee,G as Le,H as Ae,I as ke,J as Oe,K as Te,L as $,M as K,N as Pe,O as Me,S as Ie,P as Ve,Q as Ne,T as Ue,U as De,_ as R,V as Se,W as Re,Y as Ce}from"./vendor-C0OfONeZ.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();const je=M({__name:"App",setup(r){return(e,t)=>(h(),b(f(ce)))}});function $e(r){return[...new Set(r)]}function V(r){if(r===null||typeof r!="object")return r;if(Array.isArray(r))return r.map(s=>V(s));const e={};for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=V(r[t]));return e}function W(r,e){let t={};for(const s in r)r.hasOwnProperty(s)&&(typeof r[s]=="object"&&e.hasOwnProperty(s)?t[s]=W(r[s],e[s]):t[s]=r[s]);for(const s in e)e.hasOwnProperty(s)&&(t.hasOwnProperty(s)&&typeof e[s]=="object"?t[s]=W(t[s],e[s]):t[s]=e[s]);return t}const Ke=Object.freeze(Object.defineProperty({__proto__:null,deepCopy:V,deepMerge:W,unique:$e},Symbol.toStringTag,{value:"Module"}));class J{constructor(e=[]){this.values=e}sum(){let e=0;for(const t of this.values)e+=t;return e}mean(){let e=0,t=0;for(const s of this.values)typeof s<"u"&&s!==null&&(e+=s,t++);if(t!==0)return e/t}median(){if(this.values.length===0)return;const e=this.values.slice(0).sort(function(n,a){return n-a}),t=Math.floor(e.length/2);return e.length%2===0?(e[t]+e[t-1])/2:e[t]}min(){return Math.min.apply(null,this.values)}max(){return Math.max.apply(null,this.values)}count(){return this.values.length}variance(){const e=this.mean();if(e===void 0)return;let t=0;for(const n of this.values)t+=Math.pow(n-e,2);return t/(this.values.length-1)}sd(){const e=this.variance();return e===void 0?void 0:Math.sqrt(e)}frequencies(){const e={};for(const t of this.values)typeof e[t]>"u"?e[t]=1:e[t]++;return e}all(e){for(const t of this.values)if(!e(t))return!1;return!0}subset(e){const t=[];for(const s of this.values)e(s)&&t.push(s);return new J(t)}}function ze(r,e){const t=new Blob([r],{type:"text/plain"});let s="";typeof window.webkitURL<"u"?s=window.webkitURL.createObjectURL(t):s=window.URL.createObjectURL(t);const n=document.createElement("a");n.id="jspsych-download-as-text-link",n.style.display="none",n.download=e,n.href=s,n.click()}function Ye(r){const e=typeof r!="object"?JSON.parse(r):r;let t="",s="";const n=[];for(const a of e)for(const i in a){let o=i+"";o='"'+o.replace(/"/g,'""')+'",',n.includes(i)||(n.push(i),t+=o)}t=t.slice(0,-1),s+=t+`\r
`;for(const a of e){t="";for(const i of n){let o=typeof a[i]>"u"?"":a[i];typeof o=="object"&&(o=JSON.stringify(o));const l=o+"";t+='"'+l.replace(/"/g,'""')+'",'}t=t.slice(0,-1),s+=t+`\r
`}return s}function Fe(){const r=window.location.search.slice(1).split("&"),e={};for(let t=0;t<r.length;++t){const s=r[t].split("=",2);s.length==1?e[s[0]]="":e[s[0]]=decodeURIComponent(s[1].replace(/\+/g," "))}return e}class x{constructor(e=[]){d(this,"trials");this.trials=e}push(e){return this.trials.push(e),this}join(e){return this.trials=this.trials.concat(e.values()),this}top(){return this.trials.length<=1?this:new x([this.trials[this.trials.length-1]])}first(e=1){if(e<1)throw`You must query with a positive nonzero integer. Please use a
               different value for n.`;return this.trials.length===0?new x:(e>this.trials.length&&(e=this.trials.length),new x(this.trials.slice(0,e)))}last(e=1){if(e<1)throw`You must query with a positive nonzero integer. Please use a
               different value for n.`;return this.trials.length===0?new x:(e>this.trials.length&&(e=this.trials.length),new x(this.trials.slice(this.trials.length-e,this.trials.length)))}values(){return this.trials}count(){return this.trials.length}readOnly(){return new x(V([this.trials]))}addToAll(e){for(const t of this.trials)Object.assign(t,e);return this}addToLast(e){return this.trials.length>0&&Object.assign(this.trials[this.trials.length-1],e),this}filter(e){let t;Array.isArray(e)?t=V(e):t=V([e]);const s=[];for(const n of this.trials){let a=!1;for(const i of t){let o=!0;for(const l of Object.keys(i))typeof n[l]<"u"&&n[l]===i[l]||(o=!1);if(o){a=!0;break}}a&&s.push(n)}return new x(s)}filterCustom(e){return new x(this.trials.filter(e))}filterColumns(e){return new x(this.trials.map(t=>Object.fromEntries(e.filter(s=>s in t).map(s=>[s,t[s]]))))}select(e){const t=[];for(const s of this.trials)typeof s[e]<"u"&&t.push(s[e]);return new J(t)}ignore(e){Array.isArray(e)||(e=[e]);const t=V(this.trials);for(const s of t)for(const n of e)delete s[n];return new x(t)}uniqueNames(){const e=[];for(const t of this.trials)for(const s of Object.keys(t))e.includes(s)||e.push(s);return e}csv(){return Ye(this.trials)}json(e=!1){return e?JSON.stringify(this.trials,null,"	"):JSON.stringify(this.trials)}localSave(e,t){e=e.toLowerCase();let s;if(e==="json")s=this.json();else if(e==="csv")s=this.csv();else throw new Error('Invalid format specified for localSave. Must be "json" or "csv".');ze(s,t)}}class We{constructor(){d(this,"results",new x);d(this,"dataProperties",{});d(this,"queryString",{});this.reset()}reset(){this.results=new x,this.dataProperties={},this.queryString={}}get(){return this.results}write(e){Object.assign(e,this.dataProperties),this.results.push(e)}addProperties(e){this.results.addToAll(e),this.dataProperties=Object.assign({},this.dataProperties,e)}addDataToLastTrial(e){this.results.addToLast(e)}urlVariables(){return Object.keys(this.queryString).length==0&&(this.queryString=Fe()),this.queryString}getURLVariable(e){return this.urlVariables()[e]}getDisplayData(e="json"){return e=e.toLowerCase(),e!=="json"&&e!=="csv"&&(console.log("Invalid format declared for displayData function. Using json as default."),e="json"),e==="json"?this.results.json(!0):this.results.csv()}getLastTrialData(){return this.results.top()}}class Be{constructor(){d(this,"dom",document.documentElement);d(this,"listeners",new Set);d(this,"holdKey",new Set);d(this,"CaseSensority",!1);this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this)}transforCaseToLower(e){return this.CaseSensority?e:e.toLowerCase()}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}removeAllListener(){this.listeners.clear()}isKeyPress(e){return this.holdKey.has(this.transforCaseToLower(e))}handleKeyDown(e){const t=c.instance.currTime,{key:s}=e;for(const n of this.listeners)n(e,t);this.holdKey.add(this.transforCaseToLower(s))}handleKeyUp(e){const{key:t}=e;this.holdKey.delete(this.transforCaseToLower(t))}registerListener(){this.dom.addEventListener("keydown",this.handleKeyDown),this.dom.addEventListener("keyup",this.handleKeyUp)}destoryListener(){this.dom.removeEventListener("keydown",this.handleKeyDown),this.dom.removeEventListener("keyup",this.handleKeyUp)}}class Ge{constructor(){d(this,"dom",document.documentElement);d(this,"listeners",new Set);this.handlePointer=this.handlePointer.bind(this)}handlePointer(e){const t=c.instance.currTime;for(const s of this.listeners)s(e,t)}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}removeAllListener(){this.listeners.clear()}registerListener(){this.dom.addEventListener("pointerdown",this.handlePointer),this.dom.addEventListener("pointermove",this.handlePointer),this.dom.addEventListener("pointerleave",this.handlePointer)}destoryListener(){this.dom.removeEventListener("pointerdown",this.handlePointer),this.dom.removeEventListener("pointermove",this.handlePointer),this.dom.removeEventListener("pointerleave",this.handlePointer)}}class He{constructor(){d(this,"timeout_handlers",[]);d(this,"interval_handlers",[])}setTimeout(e,t){const s=window.setTimeout(e,t);return this.timeout_handlers.push(s),s}setInterval(e,t){const s=window.setInterval(e,t);return this.interval_handlers.push(s),s}clearAllTimer(){for(const e of this.timeout_handlers)clearTimeout(e);for(const e of this.interval_handlers)clearInterval(e);this.timeout_handlers=[],this.interval_handlers=[]}}const Je={class:"rotary-phone"},Xe={class:"icon"},Qe=M({__name:"rotaryPhone",setup(r){return(e,t)=>(h(),_("div",Je,[P("div",Xe,[P("div",null,[O(f(he))])]),t[0]||(t[0]=P("p",{class:"text"},"请旋转屏幕",-1))]))}}),U=(r,e)=>{const t=r.__vccOpts||r;for(const[s,n]of e)t[s]=n;return t},ee=U(Qe,[["__scopeId","data-v-2035dcf8"]]);class Ze{constructor(){d(this,"listeners",new Set);this.handleWindow=this.handleWindow.bind(this)}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}removeAllListener(){this.listeners.clear()}init(){this.resize({type:"resize"},0)}resize(e,t){if(e.type!=="resize")return;const{innerWidth:s,innerHeight:n}=window;s>n&&c.opts.forceDirection==="v"?(c.instance.pause(),j(k(ee),c.instance.currTrial.parent.getDisplayDom())):s<n&&c.opts.forceDirection==="h"?(c.instance.pause(),j(k(ee),c.instance.currTrial.parent.getDisplayDom())):c.instance.resume()}handleWindow(e){const t=c.instance.currTime;for(const s of this.listeners)s(e,t);c.opts.toastClose&&(e.preventDefault(),e.stopPropagation())}registerListener(){window.addEventListener("resize",this.handleWindow),window.addEventListener("beforeunload",this.handleWindow),window.addEventListener("unload",this.handleWindow),this.addListener(this.resize)}destoryListener(){window.removeEventListener("resize",this.handleWindow),window.removeEventListener("beforeunload",this.handleWindow),window.removeEventListener("unload",this.handleWindow)}}var A=(r=>(r[r.PENDING=0]="PENDING",r[r.RUNNING=1]="RUNNING",r[r.PAUSED=2]="PAUSED",r[r.COMPLETED=3]="COMPLETED",r[r.ABORTED=4]="ABORTED",r))(A||{});function qe(r=Math.random().toString()){return r}function X(r,e,t=!1){const s=Array.isArray(r),n=Array.isArray(e);if(!s)n?(e=[e[0]],console.log("Unclear parameters given to randomization.repeat. Multiple set sizes specified, but only one item exists to sample. Proceeding using the first set size.")):(r=[r],e=[e]);else if(n){if(r.length!=e.length)if(console.warn("Unclear parameters given to randomization.repeat. Items and repetitions are unequal lengths. Behavior may not be as expected."),e.length<r.length){let o=[];for(let l=0;l<r.length;l++)o.push(e);e=o}else e=e.slice(0,r.length)}else{let o=[];for(let l=0;l<r.length;l++)o.push(e);e=o}let a=[];for(let o=0;o<r.length;o++)for(let l=0;l<e[o];l++)r[o]==null||typeof r[o]!="object"?a.push(r[o]):a.push(Object.assign({},r[o]));let i=N(a);return t&&(i=at(i)),i}function N(r){Array.isArray(r)||console.error("Argument to shuffle() must be an array.");const e=r.slice(0);let t=e.length,s,n;for(;t;)n=Math.floor(Math.random()*t--),s=e[t],e[t]=e[n],e[n]=s;return e}function et(r,e){Array.isArray(r)||console.error("First argument to shuffleNoRepeats() must be an array."),typeof e<"u"&&typeof e!="function"&&console.error("Second argument to shuffleNoRepeats() must be a function."),typeof e>"u"&&(e=function(o,l){return o===l});let t={};r.forEach((o,l)=>{t[l]=[[],[]],r.forEach((v,m)=>{(e(o,v)?1:0)==0?t[l][1].push(m):t[l][0].push(m)})});let s=[],n=Object.keys(t).map(o=>parseInt(o)),a=[];for(;Object.keys(t).length>0;){let o=0,l=[];n.forEach((m,y)=>{t[m][0].length>o?(o=t[m][0].length,l=[m]):t[m][0].length==o&&l.push(m)});let v=n.length?l[Math.floor(Math.random()*l.length)]:a[Math.floor(Math.random()*a.length)];s.push(v),Object.keys(t).forEach((m,y)=>{t[m][0].indexOf(v)>=0&&t[m][0].splice(t[m][0].indexOf(v),1),t[m][1].indexOf(v)>=0&&t[m][1].splice(t[m][1].indexOf(v),1)}),n=t[v][1],a=t[v][0],delete t[v]}let i=[];return s.forEach(o=>{i.push(r[o])}),i}function ne(r,e=!1){const t=r.length;if(t==1)return console.warn("shuffleAlternateGroups() was called with only one group. Defaulting to simple shuffle."),N(r[0]);let s=[];for(let o=0;o<t;o++)s.push(o);e&&(s=N(s));const n=[];let a=-1;for(let o=0;o<t;o++)a=a===null?r[o].length:Math.min(a,r[o].length),n.push(N(r[o]));const i=[];for(let o=0;o<a;o++)for(let l=0;l<s.length;l++)i.push(n[s[l]][o]);return i}function ie(r,e){return Array.isArray(r)||console.error("First argument to sampleWithoutReplacement() must be an array"),e>r.length&&console.error("Cannot take a sample larger than the size of the set of items to sample."),N(r).slice(0,e)}function oe(r,e,t){Array.isArray(r)||console.error("First argument to sampleWithReplacement() must be an array");const s=[];if(typeof t<"u"){t.length!==r.length&&console.error("The length of the weights array must equal the length of the array to be sampled from.");let i=0;for(const o of t)i+=o;for(const o of t)s.push(o/i)}else for(let i=0;i<r.length;i++)s.push(1/r.length);const n=[s[0]];for(let i=1;i<s.length;i++)n.push(s[i]+n[i-1]);const a=[];for(let i=0;i<e;i++){const o=Math.random();let l=0;for(;o>n[l];)l++;a.push(r[l])}return a}function tt(r,e=1,t=!1){let s=[{}];for(const[n,a]of Object.entries(r)){const i=[];for(const o of a)for(const l of s)i.push({...l,[n]:o});s=i}return X(s,e,t)}function st(r=32){let e="";const t="0123456789abcdefghjklmnopqrstuvwxyz";for(let s=0;s<r;s++)e+=t[Math.floor(Math.random()*t.length)];return e}function rt(r,e){if(e<r)throw new Error("Upper boundary must be greater than or equal to lower boundary");return r+Math.floor(Math.random()*(e-r+1))}function nt(r){return Math.random()<=r?1:0}function B(r,e){return ot()*e+r}function G(r){return-Math.log(Math.random())/r}function it(r,e,t,s=!1){let n=B(r,e)+G(t);if(s)for(;n<=0;)n=B(r,e)+G(t);return n}function ot(){for(var r=0,e=0;r===0;)r=Math.random();for(;e===0;)e=Math.random();return Math.sqrt(-2*Math.log(r))*Math.cos(2*Math.PI*e)}function at(r){const e={};for(const t of r)for(const s of Object.keys(t))typeof e[s]>"u"&&(e[s]=[]),e[s].push(t[s]);return e}function lt(){let r=new Date().getTime(),e=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let s=Math.random()*16;return r>0?(s=(r+s)%16|0,r=Math.floor(r/16)):(s=(e+s)%16|0,e=Math.floor(e/16)),(t==="x"?s:s&3|8).toString(16)})}const ut=Object.freeze(Object.defineProperty({__proto__:null,factorial:tt,getUuid:lt,randomID:st,randomInt:rt,repeat:X,sampleBernoulli:nt,sampleExGaussian:it,sampleExponential:G,sampleNormal:B,sampleWithReplacement:oe,sampleWithoutReplacement:ie,setSeed:qe,shuffle:N,shuffleAlternateGroups:ne,shuffleNoRepeats:et},Symbol.toStringTag,{value:"Module"}));class ae{constructor(){d(this,"index")}}class te extends ae{constructor(t,s,n=0){super();d(this,"description");d(this,"results");d(this,"properties");d(this,"id");d(this,"trial_start_time",-1);d(this,"trial_finish_time",-1);this.parent=s,this.description=t,this.results=[],this.properties={},this.id=n}parseParameterValue(t){return typeof t=="function"?t(this):t}setProperties(t,s){this.properties[t]=s}getProperties(t){return this.properties[t]}reset(){this.properties={},this.results=[]}run(){this.description.on_start&&this.description.on_start(this);const t=this.parseParameterValue(this.description.component);c.plugin.timer.setTimeout(()=>{j(t,this.parent.getDisplayDom()),F(()=>{this.trial_start_time=c.instance.currTime,this.description.on_load&&this.description.on_load(t)})},c.opts.iti??0)}pause(){c.plugin.timer.clearAllTimer(),c.plugin.keyboard.removeAllListener(),c.plugin.pointer.removeAllListener()}resume(){j(null,this.parent.getDisplayDom()),F(()=>{this.run()})}finish(t){c.plugin.timer.clearAllTimer(),c.plugin.keyboard.removeAllListener(),c.plugin.pointer.removeAllListener(),j(null,this.parent.getDisplayDom()),F(()=>{this.trial_finish_time=c.instance.currTime,Object.assign(t,{trial_id:this.getCurrId(),trial_display_time:this.trial_start_time,trial_destory_time:this.trial_finish_time,...this.properties}),this.description.on_finish&&this.description.on_finish(t),this.write(t),this.parent.run()})}getIntervalTime(t){return t-this.trial_start_time}getCurrId(){return`${this.parent.getCurrId()}-${this.id}`}getResults(t){return t>=this.results.length?[]:[this.results[t]]}write(t){this.results.push(t),c.instance.data.write(t)}}class L extends ae{constructor(t,s,n=0){super();d(this,"description");d(this,"childNodes");d(this,"timeline_variables");d(this,"id");d(this,"status",A.PENDING);d(this,"cursor_node",0);d(this,"cursor_variable",0);d(this,"cursor_repetition",0);this.parent=s,this.id=n,this.description=Array.isArray(t)?{timeline:t}:t,this.childNodes=this.description.timeline.map((a,i)=>a.hasOwnProperty("timeline")?new L(a,this,i):new te(a,this,i)),this.timeline_variables=this.generateTimelineVariableOrder(),this.reset()}resetChild(){for(const t of this.childNodes)t.reset()}reset(){this.cursor_node=-1,this.cursor_variable=0,this.cursor_repetition=0,this.timeline_variables=this.generateTimelineVariableOrder(),this.resetChild(),this.status=A.RUNNING}run(){if(this.next(),this.status===A.COMPLETED)return this.parent instanceof L&&this.parent.run(),0;if(this.status!==A.RUNNING)return 0;this.childNodes[this.cursor_node]instanceof L&&this.childNodes[this.cursor_node].reset(),this.childNodes[this.cursor_node].run()}next(){if(this.status!==A.RUNNING)return 0;const{conditional_function:t,loop_function:s,repetitions:n=1}=this.description;if(this.cursor_node===-1)return!t||t()?(this.description.on_timeline_start&&this.description.on_timeline_start(),this.cursor_node=0,this.resetChild(),0):(this.parent instanceof L&&this.parent.run(),this.status=A.ABORTED,0);if(this.cursor_node+=1,this.cursor_node>=this.childNodes.length&&(this.cursor_node=0,this.cursor_variable+=1,this.resetChild(),this.cursor_variable&&this.cursor_variable%this.timeline_variables.length===0||this.description.trial_num&&this.cursor_variable>=this.description.trial_num)){if(this.cursor_variable=0,this.cursor_repetition+=1,this.cursor_repetition>=n){const a=this.cursor_repetition;return s&&s(new x(this.getResults()))?(this.reset(),this.cursor_repetition=a,this.cursor_node=0,0):(this.description.on_timeline_finish&&this.description.on_timeline_finish(),this.status=A.COMPLETED,0)}this.timeline_variables=this.generateTimelineVariableOrder()}}getCurrId(){let t=[];return this.parent instanceof L&&t.push(...this.parent.getCurrId().split("-")),t.push(`${this.id}.${this.cursor_repetition}.${this.cursor_variable}`),t.join("-")}getTopTimeline(){return this.parent instanceof L?this.parent.getTopTimeline():this}getActivateTrial(){const t=this.childNodes[this.cursor_node];return t instanceof L?t.getActivateTrial():t}getStatus(){return this.status}getResults(){const t=[],{repetitions:s=1}=this.description;for(let n=0;n<s;n++)for(let a=0;a<this.timeline_variables.length;a++)for(const i of this.childNodes)i instanceof te&&t.push(...i.getResults(n*this.timeline_variables.length+a)),i instanceof L&&t.push(...i.getResults());return t}getDisplayDom(){return this.parent instanceof L?this.parent.getDisplayDom():this.parent}generateTimelineVariableOrder(){var a;const t=(a=this.description.timeline_variables)==null?void 0:a.length;if(!t)return[-1];let s=[...Array(t).keys()];const n=this.description.sample;if(n)switch(n.type){case"custom":s=n.fn(s);break;case"with-replacement":s=oe(s,n.size,n.weights);break;case"without-replacement":s=ie(s,n.size);break;case"fixed-repetitions":s=X(s,n.size);break;case"alternate-groups":s=ne(n.groups,n.randomize_group_order);break}return this.description.randomize_order&&(s=N(s)),s}getAllTimelineVariables(){return{...this.parent instanceof L?this.parent.getAllTimelineVariables():{},...this.description.timeline_variables?this.description.timeline_variables[this.timeline_variables[this.cursor_variable]]:{}}}pause(){this.status===A.RUNNING&&(this.status=A.PAUSED,this.childNodes[this.cursor_node].pause())}resume(){this.status===A.PAUSED&&(this.status=A.RUNNING,this.childNodes[this.cursor_node].resume())}}const E=class E{constructor(){d(this,"timeline");d(this,"data",new We);this.data.reset(),this.timeline=new L([],document.documentElement)}load(e,t){this.timeline=new L(e,t),E.plugin.keyboard.registerListener(),E.plugin.pointer.registerListener(),E.plugin.window.registerListener(),this.timeline.run(),E.plugin.window.init()}pause(){this.timeline.pause()}resume(){this.timeline.resume()}get currTrial(){return this.timeline.getActivateTrial()}get currTime(){return new Date().getTime()}static get instance(){return E.only_instance===void 0&&(E.only_instance=new E),E.only_instance}};d(E,"only_instance"),d(E,"opts",{toastClose:!0}),d(E,"plugin",{timer:new He,keyboard:new Be,pointer:new Ge,window:new Ze,utils:Ke,random:ut});let c=E;const ct=H("loader-assets-to-blobs",{state(){return{_running:!1,tmpArr:new Array,blobMap:new Map,loading:0}},getters:{isInit(){return!!this.blobMap.size},isRunning(){return this._running},isFinish(){return!this.tmpArr.length},progress(){return{len:this.tmpArr.length+this.blobMap.size,left:this.tmpArr.length,loading:this.loading}}},actions:{_addAssetsToBlobAsync(r){const e=this,t=new XMLHttpRequest;t.open("GET",r,!0),t.responseType="blob",t.onload=function(){if(e.loading-=1,this.status==200){const n=this.response;e._loadSuccess(r,n)}else e._loadError(r,"Error")};let s=0;t.onprogress=n=>{this.loading+=(n.loaded-s)/n.total,s=n.loaded},t.ontimeout=function(){e._loadError(r,"Timeout!")},t.send()},_loadSuccess(r,e){this.tmpArr.map((t,s)=>{t[1]===r&&(this.tmpArr.splice(s,1),this.blobMap.set(t[0],URL.createObjectURL(e)))})},_loadError(r,e){console.warn(`load Assets Error: ${e}, url: ${r}`)},addAssets(r,e){this.tmpArr.push([r,e])},removeAssets(r){URL.revokeObjectURL(this.getAssets(r)),this.tmpArr.forEach((e,t)=>{e[1]===r&&(this.tmpArr.splice(t,1),this.blobMap.delete(e[0]))})},getAssets(r){const e=this.blobMap.get(r);return e||""},startLoad(){return this.isRunning?0:(this._running=!0,this.tmpArr.forEach(r=>{this._addAssetsToBlobAsync(r[1])}),this._running=!1,1)}}}),ht=H("browser-info",{state(){return{isInit:!1,browser:{}}},actions:{init(){de.getInfo().then(r=>{Object.keys(r).forEach(e=>{this.browser[e]=r[e]}),this.isInit=!0})}}}),dt={class:"plugin-box"},pt=M({__name:"Preload",props:{assets:Array},setup(r){const e=r,t=ht(),s=ct(),n=S("0"),a=S("-1"),i=()=>{const o=Object.assign({},t.browser);c.instance.currTrial.finish({trial_type:"perload",browser_info:JSON.stringify(o)})};return z(()=>{var o;s.isInit?i():((o=e.assets)==null||o.forEach(([l,v])=>{s.addAssets(l,v)}),t.init(),s.startLoad(),c.plugin.timer.setInterval(()=>{if(t.isInit&&s.isFinish)i();else{const{len:l,left:v,loading:m}=s.progress;n.value=l.toString(),a.value=(l-v+m).toFixed(2)}},100))}),(o,l)=>(h(),_("div",dt,[P("div",null,D(a.value)+" / "+D(n.value),1)]))}}),ft=["innerHTML"],mt=M({__name:"HtmlKeyboard",props:{stimulus:{type:String,default:""},stimulus_duration:{type:Number,default:0},trial_duration_time:{type:Number,default:0},response_ends_trial:{type:Boolean,default:!0},choices:{type:Array,default:["ALL_KEYS"]}},setup(r){const e=r,t=(a,i)=>{const o=c.plugin.keyboard.transforCaseToLower(a.key);if(e.choices.indexOf("NO_KEYS")>=0)return 0;if(e.choices.indexOf("ALL_KEYS")>=0||e.choices.indexOf(o)>=0){const l={rt:c.instance.currTrial.getIntervalTime(i),response:o,stimulus:e.stimulus};s(!1,l)}};c.plugin.keyboard.addListener(t);const s=(a=!1,i={})=>{const o={trial_type:"html-keyboard",...i};e.response_ends_trial&&!a&&c.instance.currTrial.finish(o),a&&c.instance.currTrial.finish(o)},n=S();return z(()=>{e.trial_duration_time>0&&c.plugin.timer.setTimeout(()=>{s(!0)},e.trial_duration_time),e.stimulus_duration>0&&c.plugin.timer.setTimeout(()=>{var a,i;(a=n.value)==null||a.classList.add("hidden"),(i=n.value)==null||i.attributes.setNamedItem(document.createAttribute("hidden"))},e.stimulus_duration)}),(a,i)=>(h(),_("div",{class:"plugin-box",ref_key:"dom",ref:n},[P("div",{innerHTML:e.stimulus},null,8,ft)],512))}}),se=U(mt,[["__scopeId","data-v-8e60aac0"]]),gt={class:"questionnaire"},_t={class:"question-title"},yt=["innerHTML"],vt={style:{"text-align":"center"}},wt=M({__name:"Questionnaire",props:{ques:{}},emits:["endTrial"],setup(r,{emit:e}){const t=Ee,s=e,a=r.ques??[],i=Z(function(){const y={};return a.forEach(g=>{g.type==="checkbox"||g.type==="slider"?y[g.name]=[]:g.type==="rating"?y[g.name]=0:y[g.name]=""}),y}()),o=Z(function(){const y={};return a.forEach(g=>{var u;y[g.name]=[],(u=g.valid)==null||u.forEach(p=>{y[g.name].push(p)})}),y}()),l=async y=>{y&&await y.validate((g,u)=>{g?s("endTrial",Pe(i)):console.warn(u)})},v=y=>{y&&y.resetFields()},m=S();return(y,g)=>(h(),_("div",gt,[O(f(pe),{ref_key:"formRef",ref:m,"status-icon":"",rules:o,model:i,onSubmit:g[2]||(g[2]=fe(()=>{},["prevent"])),"label-position":"top",size:"large"},{default:T(()=>[(h(!0),_(I,null,C(f(a),u=>(h(),_(I,{key:u.name},[P("div",_t,D(u.title),1),O(f(me),{prop:u.name},{default:T(()=>[u.type=="desc"?(h(),_("div",{key:0,class:"question-desc",innerHTML:u.desc},null,8,yt)):w("",!0),u.type=="text"?(h(),b(f(q),{key:1,name:u.name,readonly:u.readonly??!1,"show-password":u.showPassword??!1,placeholder:u.placeholder,modelValue:i[u.name],"onUpdate:modelValue":p=>i[u.name]=p},null,8,["name","readonly","show-password","placeholder","modelValue","onUpdate:modelValue"])):w("",!0),u.type=="number"?(h(),b(f(q),{key:2,type:"number",name:u.name,placeholder:u.placeholder,modelValue:i[u.name],"onUpdate:modelValue":p=>i[u.name]=p},null,8,["name","placeholder","modelValue","onUpdate:modelValue"])):w("",!0),u.type=="radio"?(h(),b(f(ge),{key:3,modelValue:i[u.name],"onUpdate:modelValue":p=>i[u.name]=p},{default:T(()=>[(h(!0),_(I,null,C(u.choices,(p,Q)=>(h(),_("div",null,[O(f(_e),{size:"large",value:p,label:p},null,8,["value","label"])]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])):w("",!0),u.type=="checkbox"?(h(),b(f(ye),{key:4,modelValue:i[u.name],"onUpdate:modelValue":p=>i[u.name]=p},{default:T(()=>[(h(!0),_(I,null,C(u.choices,(p,Q)=>(h(),_("div",null,[O(f(ve),{value:p,label:p},null,8,["value","label"])]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])):w("",!0),u.type=="switch"?(h(),b(f(we),{key:5,modelValue:i[u.name],"onUpdate:modelValue":p=>i[u.name]=p},{default:T(()=>[(h(!0),_(I,null,C(u.choices,(p,Q)=>(h(),b(f(be),{label:p,value:p},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])):w("",!0),u.type=="date"?(h(),b(f(xe),{key:6,locale:f(t)},{default:T(()=>[O(f(Le),{modelValue:i[u.name],"onUpdate:modelValue":p=>i[u.name]=p,format:"YYYY/MM/DD","value-format":"YYYY/MM/DD"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["locale"])):w("",!0),u.type=="time"?(h(),b(f(Ae),{key:7,modelValue:i[u.name],"onUpdate:modelValue":p=>i[u.name]=p,placeholder:"选择时间"},null,8,["modelValue","onUpdate:modelValue"])):w("",!0),u.type=="slider"?(h(),b(f(ke),{key:8,modelValue:i[u.name],"onUpdate:modelValue":p=>i[u.name]=p,min:u.min,max:u.max,step:u.step},null,8,["modelValue","onUpdate:modelValue","min","max","step"])):w("",!0),u.type=="rating"?(h(),b(f(Oe),{key:9,modelValue:i[u.name],"onUpdate:modelValue":p=>i[u.name]=p,max:u.max},null,8,["modelValue","onUpdate:modelValue","max"])):w("",!0)]),_:2},1032,["prop"]),O(f(Te))],64))),128)),P("div",vt,[O(f($),{type:"danger",onClick:g[0]||(g[0]=u=>{v(m.value)})},{default:T(()=>[K(D(f(t).el.colorpicker.clear),1)]),_:1}),O(f($),{type:"primary",onClick:g[1]||(g[1]=u=>{l(m.value)})},{default:T(()=>[K(D(f(t).el.colorpicker.confirm),1)]),_:1})])]),_:1},8,["rules","model"])]))}}),bt=U(wt,[["__scopeId","data-v-9f11da2d"]]),xt={class:"plugin-box"},Et=M({__name:"Survey",props:{ques:{type:Array,default:[{name:"aa0",type:"desc",desc:"测试描述题"},{name:"aa1",type:"text",title:"测试填空题",placeholder:"请输入需要的文本",valid:[{required:!0}]},{name:"aa2",type:"radio",title:"测试单选题",choices:["1","2"]},{name:"aa3",type:"checkbox",title:"测试多选题",choices:["1","2"]},{name:"aa4",type:"switch",title:"测试选项卡",choices:["1","2"]},{name:"aa5",type:"date",title:"日期选择"},{name:"aa6",type:"time",title:"时间选择"},{name:"aa7",type:"slider",title:"基础滑块"},{name:"aa8",type:"rating",title:"基础评分"}]}},setup(r){const e=r,t=s=>{c.instance.currTrial.finish(Object.assign({},{trial_type:"survey"},s))};return(s,n)=>(h(),_("div",xt,[O(bt,{ques:e.ques,onEndTrial:t},null,8,["ques"])]))}}),Lt=U(Et,[["__scopeId","data-v-5be3e56e"]]),At={style:{"user-select":"none"}},kt={class:"text-box"},Ot={class:"button-box"},Tt=M({__name:"Instruction",props:{pages:{}},setup(r){const e=r,t=S(0),s=()=>{if(t.value>=e.pages.length-1){c.instance.currTrial.finish({trial_type:"instruction"});return}t.value++},n=()=>{t.value<=0||t.value--};return(a,i)=>(h(),_("div",At,[P("div",kt,[(h(!0),_(I,null,C(e.pages,(o,l)=>(h(),_(I,{key:l},[t.value===l?(h(),b(Me(o),{key:0})):w("",!0)],64))),128))]),P("div",Ot,[t.value>0?(h(),b(f($),{key:0,onClick:n},{default:T(()=>[...i[0]||(i[0]=[K("上一页",-1)])]),_:1})):w("",!0),t.value<=e.pages.length-1?(h(),b(f($),{key:1,onClick:s},{default:T(()=>[K(D(t.value===e.pages.length-1?"完成":"下一页"),1)]),_:1})):w("",!0)])]))}}),Pt=U(Tt,[["__scopeId","data-v-8425be48"]]),Mt={accessKey:"CVx5X2pqH8U8edrUCzlV",secretKey:"sJIDFX5asll6PckUtlWlbatqTyxAKPsJM8fTHa4g"},Ht=[{name:"desc",type:"desc",desc:"<h2>一、孩子信息</h2>"},{name:"name",type:"text",title:"姓名",placeholder:"请输入您孩子的姓名",valid:[{required:!0}]},{name:"gender",type:"radio",title:"性别",choices:["男","女"],valid:[{required:!0}]},{name:"birth",type:"date",title:"出生日期",valid:[{required:!0}]},{name:"idcard",type:"text",title:"身份证后六位",placeholder:"请输入您的身份证后六位",valid:[{required:!0},{validator:(r,e,t)=>{e.length==6&&/^\d{5}[\dxX]$/.test(e)?t():t(new Error("请输入正确的身份证后六位"))},trigger:"blur"}]},{name:"desc",type:"desc",desc:"<h2>二、家长信息（选填）</h2>"},{name:"p_name",type:"text",title:"您的姓名",placeholder:"请输入您的姓名"},{name:"p_gender",type:"radio",title:"您的性别",choices:["男","女"]},{name:"p_birth",type:"date",title:"请选择您的出生年月日"}],Jt=["叫喊","转身离去","赛跑","睁大眼睛","哭泣","跳跃","生病","愤怒","恶心","冷静","头痛","尖叫","出汗","紧张","热","温暖","喜爱","微笑","兴奋","大笑"],Xt=["愤怒","恐惧","快乐","悲伤","惊讶","厌恶"],Qt=[["h1-happy","./assets/imgs/Y39F-25_happy.jpg"],["h1-sad","./assets/imgs/Y39F-25_sad.jpg"],["h1-fear","./assets/imgs/Y39F-25_fear.jpg"],["h1-angry","./assets/imgs/Y39F-25_anger.jpg"],["h1-surprise","./assets/imgs/Y39F-25_surprise.jpg"],["h1-disgust","./assets/imgs/Y39F-25_disgust.jpg"],["h2-happy","./assets/imgs/Y58M-22_happy.jpg"],["h2-sad","./assets/imgs/Y58M-22_sad.jpg"],["h2-fear","./assets/imgs/Y58M-22_fear.jpg"],["h2-angry","./assets/imgs/Y58M-22_anger.jpg"],["h2-surprise","./assets/imgs/Y58M-22_surprise.jpg"],["h2-disgust","./assets/imgs/Y58M-22_disgust.jpg"]],Zt=function(){const r=[];return["h"].forEach(e=>{[1,2].forEach(t=>{["happy","sad","fear","angry","surprise","disgust"].forEach(s=>{const n=["happy","sad","fear","angry","surprise","disgust"];n.splice(n.indexOf(s),1),n.forEach(a=>{r.push({face:`${e}${t}-${s}`,bgs:c.plugin.random.shuffle([`b_${s}`,`b_${a}`])})})})})}),r}(),qt=function(){const r=[];return["happy","sad","fear","angry","surprise","disgust"].forEach(e=>{const t=["happy","sad","fear","angry","surprise","disgust"];t.splice(t.indexOf(e),1),t.forEach(s=>{for(let n=1;n<=2;n++)for(let a=1;a<=2;a++)n!==a&&r.push({face:`h${n}-${e}`,bgs:c.plugin.random.shuffle([`h${a}-${e}`,`h${a}-${s}`])})})}),r}(),es=function(){const r=[];return["h1","h2"].forEach(e=>{["happy","sad","fear","angry","surprise","disgust"].forEach(t=>{const s=["happy","sad","fear","angry","surprise","disgust"];s.splice(s.indexOf(t),1),s.forEach(n=>{[5,6,7].forEach(a=>{[1].forEach(i=>{const o=[];for(let l=0;l<12;l++)l+1==a?o.push(0):l+1==a+i?o.push(-1):o.push(1);r.push({imgs:[`${e}-${t}`,`${e}-${n}`],seq:o,detection:a-1,rsvp_iti:i})})})})})}),console.log(r),r}();function It(r){return new Promise((e,t)=>{const{csv:s,accessKey:n,secretKey:a,bucket:i,signEndpoint:o,endpoint:l,region:v,fileName:m}=r,y=new Ie({endpoint:o||l,region:v,credentials:{accessKeyId:n,secretAccessKey:a},forcePathStyle:!0});Ve(y,new Ne({Bucket:i,Key:m,ContentType:"text/csv"}),{expiresIn:600}).then(g=>{const u=g.replace(o||l,l);fetch(u,{method:"PUT",body:s}).then(e).catch(t)}).catch(t)})}const Vt="s3";function Nt(r,e){return new Promise((t,s)=>{switch(Vt){case"naodao":return;case"development":t(!0);break;case"s3":if(!e){re(r),t(!1);return}It({csv:r,...e}).then(()=>{t(!0)}).catch(s);break;default:re(r),t(!0)}})}function re(r){const e=new Blob([r],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`${c.instance.currTime}_exp_data.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}const Ut={key:0,class:"t"},Dt={key:1,class:"t"},St={key:2,class:"t"},Rt=M({__name:"endExp",props:{s3:{}},setup(r){const e=r,t=S(0);return z(()=>{const s=c.instance.data.get();Nt(s.csv(),e.s3).then(()=>{t.value=1}).catch(()=>{t.value=-1})}),(s,n)=>(h(),_("div",null,[t.value===0?(h(),_("p",Ut,"数据保存中")):w("",!0),t.value===-1?(h(),_("p",Dt,"数据上传失败，请联系有关人员")):w("",!0),t.value===1?(h(),_("p",St,"实验结束")):w("",!0),n[0]||(n[0]=P("p",{class:"c"},"© Mupsy 技术支持",-1))]))}}),Ct=U(Rt,[["__scopeId","data-v-4175a2f2"]]),jt={id:"exp"},$t=M({__name:"template",setup(r){c.opts={...c.opts,iti:0,toastClose:!1};const e=c.instance,t=[];t.push({component:k(pt,{assets:[["l1","./assets/logo/logo.svg"],["l2","./assets/logo/logo_64_64.png"],["l3","./assets/logo/logo_128_128.png"],["l4","./assets/logo/logo_256_256.png"],["l5","./assets/logo/logo_512_512.png"]]})}),t.push({component:k(Lt)});const s=k("div",{},[k("h1",{},"欢迎来到jsPsych"),k("p",{},"请按任意键开始")]);return t.push({component:k(Pt,{pages:[s,s,s,s]})}),t.push({timeline:[{component(){return k(se,{stimulus:"+",stimulus_duration:500,trial_duration_time:1e3})}},{component(){return k(se,{stimulus:e.currTrial.getCurrId(),stimulus_duration:500,trial_duration_time:1e3})}}],repetitions:5,conditional_function(){return console.log("Conditional function called"),!0},loop_function(n){return console.log("Loop function called"),!1},timeline_variables:[{currId:"1"},{currId:"2"}]}),t.push({component:k(Ct,{s3:{...Mt,bucket:"psydata",endpoint:"https://psy.mupsycho.com/oss",signEndpoint:"http://n1.jimoco.cn:29513",region:"cn",fileName:"lab-cas-23/template/test.csv"}})}),z(()=>{const n=document.querySelector("#exp");e.load(t,n)}),(n,a)=>(h(),_("div",jt))}}),Kt=U($t,[["__scopeId","data-v-7edea63f"]]),zt=Ue({history:De("./"),routes:[{path:"/",name:"experment",component:Kt},{path:"/exp1",name:"experment1",component:()=>R(()=>import("./exp1-BAA5ApY_.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)},{path:"/exp2",name:"experment2",component:()=>R(()=>import("./exp2-Cz7Xedxp.js"),__vite__mapDeps([4,1,2,5,6,7]),import.meta.url)},{path:"/exp3",name:"experment3",component:()=>R(()=>import("./exp3-wlwq2hnM.js"),__vite__mapDeps([8,1,2,5,6,9]),import.meta.url)},{path:"/exp4",name:"experment4",component:()=>R(()=>import("./exp4-Coa1yU1l.js"),__vite__mapDeps([10,1,2,5,6,11]),import.meta.url)},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>R(()=>import("./index-DKAOCwgO.js"),__vite__mapDeps([12,1,2,13]),import.meta.url)}]}),Yt=H("color-scheme",{state(){return window.matchMedia("(prefers-color-scheme: dark)").matches?{colorScheme:"dark"}:{colorScheme:"light"}},getters:{currScheme(){return this.colorScheme}},actions:{switch(r){this.colorScheme=r,document.documentElement.classList.add(r)}}}),Ft=Se(),Y=Re(je);Y.use(Ce);Y.use(Ft);Y.use(zt);Y.mount("#app");const Wt=Yt();Wt.switch("dark");export{Ct as E,se as H,Pt as I,c as J,Lt as S,U as _,pt as a,Jt as b,Mt as c,Zt as d,Xt as e,Qt as f,qt as g,es as h,Ht as p,ct as u};
